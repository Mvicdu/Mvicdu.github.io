<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://mvicdu.github.io</id>
    <title>Vic Notes</title>
    <updated>2020-03-26T02:50:33.505Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://mvicdu.github.io"/>
    <link rel="self" href="https://mvicdu.github.io/atom.xml"/>
    <subtitle>温故而知新</subtitle>
    <logo>https://mvicdu.github.io/images/avatar.png</logo>
    <icon>https://mvicdu.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, Vic Notes</rights>
    <entry>
        <title type="html"><![CDATA[linux Ansible 自动化运维配置]]></title>
        <id>https://mvicdu.github.io/post/linux-ansible-zi-dong-hua-yun-wei-pei-zhi/</id>
        <link href="https://mvicdu.github.io/post/linux-ansible-zi-dong-hua-yun-wei-pei-zhi/">
        </link>
        <updated>2018-09-05T02:46:47.000Z</updated>
        <content type="html"><![CDATA[<p>安装 :<br>
配置epel源：<br>
[root@ansible ~]# wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo  #源自己修改<br>
[root@ansible ~]# yum clean all<br>
[root@ansible ~]# yum makecache</p>
<p>安装ansible：<br>
[root@ansible ~]# yum -y install ansible</p>
<p>Inventory中文文档：<br>
Inventory文件通常用于定义要管理的主机的认证信息，如ssh登录用户名、密码以及key相关信息。<br>
可以同时操作一个组的多台主机，组与主机组之间的关系都是通过inventory文件配置。<br>
文件路径：/etc/ansible/hosts</p>
<p>基于密码链接<br>
配置方法：</p>
<h1 id="方法一-主机端口密码">方法一 主机+端口+密码</h1>
<p>例子：<br>
下面四个被管理IP地址，分成web和DB两组<br>
[web]<br>
192.168.1.31 ansible_ssh_port=22 ansible_ssh_user=root ansible_ssh_pass=&quot;123456&quot;<br>
192.168.1.32 ansible_ssh_port=22 ansible_ssh_user=root ansible_ssh_pass=&quot;123456&quot;<br>
[DB]<br>
192.168.1.33 ansible_ssh_port=22 ansible_ssh_user=root ansible_ssh_pass=&quot;123456&quot;<br>
192.168.1.36 ansible_ssh_port=22 ansible_ssh_user=root ansible_ssh_pass=&quot;123456&quot;</p>
<h1 id="方法二-主机端口密码">方法二 主机+端口+密码</h1>
<p>[webserver]<br>
192.168.1.3[1:3] ansible_ssh_port=22 ansible_ssh_user=root ansible_ssh_pass=&quot;123456&quot;</p>
<p>基于秘钥链接</p>
<p>[root@ansible ~]# ssh-keygen<br>
[root@ansible ~]# for i in {1..6}; do ssh-copy-id -i 192.168.1.3$i ; done</p>
<p>配置连接：</p>
<p>[root@ansible ~]# vim /etc/ansible/hosts</p>
<h1 id="方法一-主机端口">方法一 主机+端口</h1>
<p>[web]<br>
192.168.1.31:22<br>
192.168.1.32<br>
192.168.1.33<br>
192.168.1.36</p>
<h1 id="方法二-别名主机端口密钥">方法二 别名主机+端口+密钥</h1>
<p>[web]<br>
node1 ansible_ssh_host=192.168.1.31 ansible_ssh_port=22<br>
node2 ansible_ssh_host=192.168.1.32 ansible_ssh_port=22<br>
node3 ansible_ssh_host=192.168.1.33 ansible_ssh_port=22<br>
node6 ansible_ssh_host=192.168.1.36 ansible_ssh_port=22</p>
]]></content>
    </entry>
</feed>